{% extends "base.html" %}
{% block title %}Coleção · retrofagia{% endblock %}
{% block content %}
<section class="grid">
  <div class="column main-feed">
    <article class="card album-search-card">
      <h1>Sua coleção</h1>
      <p class="muted">Busque na comunidade antes de cadastrar um álbum novo.</p>
      <div class="album-search">
        <label>Busca rápida
          <input
            type="text"
            placeholder="Ex.: Loveless, Radiohead, etc."
            data-album-search-input
            autocomplete="off"
          />
        </label>
      </div>
      <div class="album-search-results" data-album-search-results>
        <p class="muted">Sem resultados ainda. Comece digitando acima.</p>
      </div>
      <div class="album-search-manual">
        <p class="muted">Não encontrou o álbum? Complete os dados manualmente.</p>
        <a class="button ghost" href="{{ url_for('main.create_album') }}">Cadastrar novo álbum</a>
      </div>
    </article>

    <div class="album-grid">
      {% for album in albums %}
      <article class="card album-card">
        <a class="album-link" href="{{ url_for('main.album_detail', album_id=album.id) }}">
          {% if album.cover_url %}
          <img src="{{ album.cover_url | image_url }}" alt="Capa de {{ album.title }}" />
          {% else %}
          <div class="album-cover-placeholder">{{ album.title[0]|upper }}</div>
          {% endif %}
        </a>
        <div class="album-meta">
          <a href="{{ url_for('main.album_detail', album_id=album.id) }}">
            <h2>{{ album.title }}</h2>
          </a>
          <p class="muted">{{ album.artist }}</p>
        </div>
        <form method="post" action="{{ url_for('main.delete_album', album_id=album.id) }}">
          <button type="submit" class="ghost">Remover</button>
        </form>
      </article>
      {% else %}
      <article class="card empty">
        <p>Sem álbuns cadastrados. Use o formulário acima para começar.</p>
      </article>
      {% endfor %}
    </div>
  </div>
</section>
{% endblock %}
